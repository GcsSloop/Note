# 合作式编程与防御式编程

## 合作式编程

合作式编程就是大家都协商好，你做什么，我做什么，我们直接用什么接口进行数据交换，数据交换的格式是什么，然后我们就放心的各自去写代码了，等按照标准写完了，之后一对接，就完美的实现了功能。

**这种方式看起来很美好，但实际上实施起来却很难，因为受到的制约条件非常多。**

例如：前端(客户端)与后台(服务端)交换数据，就有很多的坑，例如后台要兼容旧的数据库和逻辑，这样给到前端的数据就可能会出现不同，如：多一个或者少一个不太重要的数据，有部分数据关键字段丢失等。这样前端如果直接按照协议去实现逻辑，指不定哪天就会因为某一个字段不存在直接一个空指针异常就把应用崩了。

因此就有了另一种编程方案。

### 防御式编程

防御式编程就是，虽然我们有协议，但是我对对方是否会完全遵守协议并不抱有太大希望，我觉得对方可能会不完全按照协议给我传输数据，所以这里在编程的时候就会考虑到一些意外的情况，例如：任何内容在使用前都先做校验，如果不符合要求，直接丢弃，并通知服务端异常。

这种编程方式的好处是程序比较"健壮"，大大降低崩溃的概率，但弊端也非常明显，因为增加了大量校验逻辑和安全机制，代码量会急剧上涨，甚至校验逻辑太多会淹没核心逻辑，就算自己看代码一时间也很难找到哪里是核心。

### 中庸之道

所以编程最好还是按照设计好的东西来，如果遇到了不按套路的合作者，首先要让合作者去解决，让结果符合设计的逻辑，如果实在是遇到了难以解决的问题，再去把相关代码加上防御性逻辑也不迟。

当然，这样做的前提是上线前要有充分的测试，不然出了问题，自己还是要承担损失的。